C51 COMPILER V9.50a   MAIN                                                                 12/07/2016 18:53:26 PAGE 1   


C51 COMPILER V9.50a, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          
   2          /*PWM
   3          16/11/30
   4          抛弃原来错误的方法
   5          采用定时器中断
   6          */
   7          /*中断号 0,2为外部中断 1,3为定时器中断 4为串口中断 
   8          即：
   9          0       INT0
  10          1       T0
  11          2       INT1
  12          3       T1
  13          4       serial 
  14          
  15          TCON:D7-D0                      D3
  16                  TF1 TR1 TF0     TR0     IE1     IT1     IE0     IT0
  17          IE      :D7-D0                  
  18                  EA                      ES      ET1     EX1     ET0     EX0
  19          TMOD:D7-D0
  20                  GATE    C/T M1  M0|     GATE    C/T     M1      M0
  21                                  T1                |                     T0
  22          
  23          */
  24          #include "mcu_contest.h"
  25          
  26          
  27          void main(){
  28   1              
  29   1              Timer0Init();
  30   1              //初始化定时器
  31   1              EA=1;
  32   1              //允许中中断
  33   1              ET0=1;EX0=1;
  34   1              IT0=1;
  35   1              //允许定时器中断,外部中断,中断触发方式为下降沿触发
  36   1              //led0=0;
  37   1              while(1){
  38   2              /*
  39   2              1.扫描按键　（亮度／模式／色温）
  40   2              2.判断模式，自动或手动
  41   2              若自动：
  42   2                      读取红外传感器的值
  43   2                              若为0 设置PWM亮度（占空比）为1
  44   2                              若为1 读取亮度传感器的值，并设置相应占空比
  45   2              若手动;
  46   2                      设置亮度往传感器对应值接近两个单位  正常亮度时光敏电阻传感器大概为2.5-2.
             -7K
  47   2              3.读取温度湿度
  48   2              4.读取时间
  49   2              5.刷新OLED屏 时间，日期，温度/湿度，亮度，自动/手动
  50   2              
  51   2              调整时间未完成
  52   2              PWM将在定时器中断中完成
  53   2              
  54   2              
C51 COMPILER V9.50a   MAIN                                                                 12/07/2016 18:53:26 PAGE 2   

  55   2              */
  56   2                      //1.key
  57   2                      brightness1=(uchar)brightness*(color*0.1);
  58   2                      brightness2=brightness-brightness1;
  59   2                      scankey();
  60   2                      switch(mode){
  61   3                              case 0: //手动
  62   3                                      break;
  63   3                              case 1://自动
  64   3                                      break;
  65   3                      }
  66   2                      
  67   2              }
  68   1              
  69   1              
  70   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    240    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
