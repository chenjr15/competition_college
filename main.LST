C51 COMPILER V9.50a   MAIN                                                                 12/14/2016 22:09:44 PAGE 1   


C51 COMPILER V9.50a, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          
   2          /*PWM OK
   3          
   4          */
   5          /*中断号 0,2为外部中断 1,3为定时器中断 4为串口中断 
   6          即：
   7          0       INT0
   8          1       T0
   9          2       INT1
  10          3       T1
  11          4       serial 
  12          
  13          TCON:D7-D0                      D3
  14                  TF1 TR1 TF0     TR0     IE1     IT1     IE0     IT0
  15          IE      :D7-D0                  
  16                  EA                      ES      ET1     EX1     ET0     EX0
  17          TMOD:D7-D0
  18                  GATE    C/T M1  M0|     GATE    C/T     M1      M0
  19                                  T1                |                     T0
  20          
  21          */
  22          #include "mcu_contest.h"
  23          
  24          
  25          void main(){
  26   1              
  27   1              Timer0Init();
  28   1              //初始化定时器
  29   1              EA=1;
  30   1              //允许中中断
  31   1              ET0=1;EX0=1;
  32   1              IT0=1;
  33   1              //允许定时器中断,外部中断,中断触发方式为下降沿触发
  34   1              //led0=0;
  35   1              peoplein=0;
  36   1              while(1){
  37   2              /*
  38   2              1.扫描按键　（亮度／模式／色温）
  39   2              2.判断模式，自动或手动
  40   2              若自动：
  41   2                      读取红外传感器的值
  42   2                              若为0 设置PWM亮度（占空比）为1
  43   2                              若为1 读取亮度传感器的值，并设置相应占空比
  44   2              若手动;
  45   2                      设置亮度往传感器对应值接近两个单位  正常亮度时光敏电阻传感器大概为2.5-2.
             -7K
  46   2              3.读取温度湿度
  47   2              4.读取时间
  48   2              5.刷新OLED屏 时间，日期，温度/湿度，亮度，自动/手动
  49   2              
  50   2              调整时间未完成
  51   2              PWM将在定时器中断中完成
  52   2              
  53   2              
  54   2              */
C51 COMPILER V9.50a   MAIN                                                                 12/14/2016 22:09:44 PAGE 2   

  55   2                      //1.key
  56   2                      brightness1=(UCHAR)brightness*(color*0.2);
  57   2                      brightness2=brightness-brightness1;
  58   2                      scankey();
  59   2                      ReadTemperature();
  60   2                      switch(mode){
  61   3                              case 0: //手动
  62   3                              lighton=1;
  63   3                                      break;
  64   3                              case 1://自动
  65   3                                      if(!peoplein) {
  66   4                                              lighton=0;
  67   4                                      }else{
  68   4                                              lighton=1;
  69   4                                      }
  70   3                              
  71   3                              
  72   3                                      break;
  73   3                      }
  74   2                      
  75   2              }
  76   1              
  77   1              
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    562    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     18    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
